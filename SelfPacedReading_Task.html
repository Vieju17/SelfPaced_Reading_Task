<!-- This is a first attempt at a self paced reading task -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta data -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reading Task</title>

    <!-- Plugins -->
    <script src="common/jspsych/dist/jspsych.js"></script>
    <script src="common/jspsych/dist/plugin-html-keyboard-response.js"></script>
    <script src="common/jspsych/dist/plugin-survey-html-form.js"></script>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="common/jspsych/dist/jspsych.css" />
  </head>
  <body></body>

  <!-- Experiment Script -->
  <script>
    const jsPsych = initJsPsych({
      on_finish: function () {
        jsPsych.data.displayData();
      },
    });

    // Timeline
    var main_timeline = [];

    // Introduction Prompt
    var intro = {
      type: jsPsychSurveyHtmlForm,
      preamble: "This is a self-paced reading task",
      html: "<p></p>",
    };
    main_timeline.push(intro);

    //Stimulus
    var stimulus = [
      {
        s1: "The cat | ___ | ___ | ___ | ___",
        s2: "___ | that | ___ | ___ | ___",
        s3: "___ | ___ | runs | ___ | ___",
        s4: "___ | ___ | ___ | chases | ___",
        s5: "___ | ___ | ___ | ___ | the dog",
        clause_type: "sr",
        number: "ss",
      },
      {
        s1: "The lion | ___ | ___ | ___ | ___",
        s2: "___ | that | ___ | ___ | ___",
        s3: "___ | ___ | runs | ___ | ___",
        s4: "___ | ___ | ___ | chases | ___",
        s5: "___ | ___ | ___ | ___ | the zebra",
        clause_type: "sr",
        number: "ss",
      },
    ];

    // Trial
    var trial_procedure = {
      timeline: [
        {
          type: jsPsychHtmlKeyboardResponse,
          choices: [" "],
          stimulus: jsPsych.timelineVariable("s1"),
          data: {
            segment: "s1",
            clause_type: jsPsych.timelineVariable("clause_type"),
            number: jsPsych.timelineVariable("number"),
          },
        },
        {
          type: jsPsychHtmlKeyboardResponse,
          choices: [" "],
          stimulus: jsPsych.timelineVariable("s2"),
          data: {
            segment: "s2",
            clause_type: jsPsych.timelineVariable("clause_type"),
            number: jsPsych.timelineVariable("number"),
          },
        },
        {
          type: jsPsychHtmlKeyboardResponse,
          choices: [" "],
          stimulus: jsPsych.timelineVariable("s3"),
          data: {
            segment: "s3",
            clause_type: jsPsych.timelineVariable("clause_type"),
            number: jsPsych.timelineVariable("number"),
          },
        },
        {
          type: jsPsychHtmlKeyboardResponse,
          choices: [" "],
          stimulus: jsPsych.timelineVariable("s4"),
          data: {
            segment: "s4",
            clause_type: jsPsych.timelineVariable("clause_type"),
            number: jsPsych.timelineVariable("number"),
          },
        },
        {
          type: jsPsychHtmlKeyboardResponse,
          choices: [" "],
          stimulus: jsPsych.timelineVariable("s5"),
          post_trial_gap: 1000,
          data: {
            segment: "s5",
            clause_type: jsPsych.timelineVariable("clause_type"),
            number: jsPsych.timelineVariable("number"),
          },
        },
      ],
      timeline_variables: stimulus,
    };
    main_timeline.push(trial_procedure);

    jsPsych.run(main_timeline);
  </script>
</html>
